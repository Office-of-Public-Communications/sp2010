<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml" xmlns:mso="urn:schemas-microsoft-com:office:office" xmlns:msdt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882">

<head>
    <script type="text/javascript" src="/Style%20Library/V6/js/vendor/mdb/jquery-3.2.1.min.js"></script>
    <style>
        h1,
        h3,
        h5 {
            font-family: Arquette;
            color: black;
            font-weight: 700;
        }

        .byLetter {
            overflow-x: scroll;
            white-space: nowrap;
        }

        .byLetter a {
            display: inline-block;
            text-align: center;
            padding: 14px;
            text-decoration: none;
        }

        #dir-title {
            font-size: 2.5rem;
        }

        #description h1 {
            font-weight: 700;
        }
        /*
        #dir-description {
			white-space: pre-wrap;
		}
        */
		#dir-statement {
			white-space: pre-wrap;
		}

        h2#dir-artist {
            font-size: 1.35rem;
            font-weight: 400;
            /*color: #0277BD;*/
        }

        span#dir-year {
            margin-right: 20px;
        }

        img#dir-img.contactImg {
            width: 100%;
            border-radius: 2px;
        }

        .contactInfoButton {
            text-align: center;
            border: 1px solid #eaeaea;
            background-color: #eaeaea;
            display: block;
            border-radius: 2px;
        }

        #addressInfo ul {
            padding: 0;
        }

        #addressInfo ul li {
            list-style: none;
        }

        .tags {
            padding: 4px 10px;
            background-color: #f4f4f4;
            border-radius: 2px;
            margin: 4px;
            display: inline-block;
        }

        #mapid {
            height: 150px;
            width: 100%;
            border-radius: 2px;
        }

        #backToDir a::before {
            content: "\f104";
            padding-right: 10px;
            margin-bottom: -5px;
            font-family: 'FontAwesomeSolid';
            font-size: 1rem;
            top: 1px;
            position: relative;
        }

        #infoTabs {
		    border-radius: 6px;
		    padding-top: 5px;
		    background-color: #f5f5f5;
		}

		#infoTabs li {
			width: 120px;
			text-align: center;
		}

		#Attractions-tab.active, #Events-tab.active, #Rentals-tab.active {
			background-color: #fff;
			box-shadow: 0 3px 6px rgba(0,0,0,0.1);
			border-radius: 6px;
		}

		.today {
			font-weight: 600;
			color: #00c853;
		}

		.parkCarousel img {
		  height: 200px;
		  display: block;
		}
		/* Datatable styles */
	 	.dataTables_length label {
			margin-right: 1rem;
			padding-top: 1rem;
		}

		.dataTables_filter.md-form {
			margin-top: .55rem;
		}

		.dataTables_filter.md-form input {
			font-weight: 300;
		}

		.dataTables_wrapper .row {
			margin-bottom: 1.5rem;
		}

		div.dataTables_wrapper div.dataTables_info {
			padding-top: 0;
			padding-bottom: 1rem;
		}

		.dataTables_paginate {
			float: right;
		}

		.dataTables_filter {
			float: right;
		}

		.dataTables_wrapper td.row {
			margin-bottom: 0rem;
		}

		.dataTables_wrapper .dataTables_paginate .paginate_button:active,
		.dataTables_wrapper .dataTables_paginate .paginate_button:hover,
		.dataTables_wrapper .dataTables_paginate .paginate_button:focus {
			outline: none !important;
			border: none;
			background-color: white !important;
			background: none !important;
			box-shadow: 0 0 0 0 !important;
		}

		div.dataTables_wrapper div.dataTables_info {
			white-space: normal;
		}

		.select-wrapper input.select-dropdown {
			margin-bottom: 0px;
			padding-top: 15px;
		}

		div.dataTables_wrapper div.dataTables_length label {
			margin-bottom: 0px;
			padding-top: 25px;
		}

		.select-dropdown {
			margin-top: 27px;
		}

		.select-wrapper span.caret {
			margin-top: 15px;
		}

		.pagination .page-link:focus {
			background-color: #007bff;
		}

		.browardT td,
		div.dataTables_wrapper div.dataTables_length label,
		#socialTable_info {
			font-size: 1rem;
			font-family: Arquette;
			line-height: 1rem;
		}

		.browardT th {
			font-size: 1.1rem;
			font-weight: 500;
			font-family: Arquette;
		}

		#socialTable.table a {
			color: #0277BD;
		}

		@media only screen and (max-width:768px) {
			#rfaTable_filter {
				width: 100%
			}

			#rfaTable_filter input {
				width: 100%
			}

			.dataTables_wrapper .row {
				margin-bottom: .5rem;
			}
		}

		#tabsWebPart>div.tabs-wrapper>ul {
			background-color: #1C2A48;
			color: white;
			font-family: Arquette;
			font-size: 1rem !important;
		}

		#tabsWebPart {
			color: #333;
			font-family: Arquette;
		}

		.table {
			color: #333;
			font-family: Arquette;
		}

		#tabsWebPart>div.tabs-wrapper a,
		#tabsWebPart .nav a:active,
		#tabsWebPart .nav a:visited,
		#tabsWebPart .nav a:link {
			color: white !important;
		}

		#tabsWebPart p {
			font-family: Arquette;
			font-size: 1rem !important;
			font-weight: 300;
			color: #333;
		}

		#tabsWebPart .btn {
			padding: .85rem 1rem;
		}

		#pubInfo .modal-header {
    		background-color: #039BE5;
			color:white;
		}
		#pubInfo .btn-pub{
    		background-color: #ffa000;
			color:#333!important;
		}
        .fa-layers{
            vertical-align:27.5%;
        }
        #sRowItems .fa-star{
            position:absolute;
            right:7px;
        }
        img.carousel-cell {
    		padding: 3px;
		}

		/* flickity styles */

		/* no circle */
		.flickity-button {
		  background: transparent;
		}
		/* big previous & next buttons */
		.flickity-prev-next-button {
		  width: 40px;
		  height: 40px;
		}
		/* icon color */
		.flickity-button-icon {
		  fill: white;
		}
		/* hide disabled button */
		.flickity-button:disabled {
		  display: none;
		}
        div#directoryItem {
            font-family: Arquette;
            font-size: 1rem;
        }
        .eventDetails {
            line-height: 1.47rem;
        }
        #alertContainer {
        background-color: #FF9802;
        cursor: pointer;
        border: 1px solid #FF9802;
    }
    #alertText {
        font-family: Arquette;
        padding-top: 6px;
        color: #1C2A48;
        font-weight: 500;
    }
    .close {
        color: #1C2A48;
        padding-top: 2px;
    }
        @media only screen and (max-width:1299px) {
            .mobileDays {
                display: block;
            }
            .desktopDays {
                display: none;
            }
        }
        @media only screen and (min-width:1300px) {
            .mobileDays {
                display: none;
            }
            .desktopDays {
                display: block;
            }
        }

</style>
    <!-- Flickity styles -->
    <link rel="stylesheet" href="https://unpkg.com/flickity@2/dist/flickity.min.css">
    <!-- /Flickity styles -->
    <!-- Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.2/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
        crossorigin="" />
    <!-- Make sure you put this AFTER Leaflet's CSS -->
    <script src="https://unpkg.com/leaflet@1.3.2/dist/leaflet.js" integrity="sha512-2fA79E27MOeBgLjmBrtAgM/20clVSV8vJERaW/EcnnWCVGwQRazzKtQS1kIusCZv1PtaQxosDZZ0F1Oastl55w=="
        crossorigin=""></script>
</head>

<body>
    <!-- Directory Web Part - Item View -->
    <div id="directoryItem" class="container py-3 d-none">

        <div id="alert-row" class="row d-none">
            <div class="col">
                <div id="alertContainer" class="alert alert-orange alert-dismissable fade show d-block w-100" role="alert">
                    <div type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </div>
                    <p id="alertText">-</p>
                </div>
            </div>
        </div>

        <div id="images" class="mb-5">
            <!-- Flickity HTML init -->
            <div class="parkCarousel d-none">
            </div>
        </div>

        <div class="row my-3">
            <div class="col-md-8 px-3">
                <h1 id="dir-title">&para;</h1>
                <strong id="dir-description-title" class="d-none">
                    Overview</strong>
                <p id="dir-description" class="d-none">&para;</p>
                <a id="reserve" class="btn btn-outline light-blue darken-1 waves-effect py-2 my-3 d-none" target="_blank"><i
                        class="fal fa-calendar-check"></i> Make a Reservation</a>
                <a id="camp" class="btn btn-outline light-blue darken-1 waves-effect py-2 my-3 d-none" target="_blank"><i
                        class="fal fa-compass"></i> Book a Campsite</a>

                <div class="row">
                    <div class="col">
                        <strong id="dir-statement-title" class="d-none features mt-3 mb-2">Features</strong>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <ul id="dir-statement" class="features-1 mb-0" style="list-style: none; padding-inline-start: 0px;"></ul>
                    </div>
                    <div class="col-md-6">
                        <strong id="dir-statement-title" class="d-none amenities"> </strong>
                        <ul id="dir-statement" class="features-2" style="list-style: none; padding-inline-start: 0px;"></ul>
                    </div>
                </div>
                <div class="row mt-4">
                    <div class="col-12">
                        <!--Datatable-->
                        <table id="eventTable" class="table table-striped table-bordered table-responsive-md browardT"
                            cellspacing="0" width="100%">
                            <thead id="eventHeader"></thead>
                            <tbody id="eventItems"></tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div id="dir-map" class="col-md-4">
                <div id="mapid" class="map"></div>
                <div id="addressInfo" class="mt-3">
                    <ul>
                        <li>
                            <strong>Address</strong>
                        </li>
                        <li id="dir-located"></li>
                        <li id="dir-address1"></li>
                        <li id="dir-address2"></li>
                        <li id="dir-csz"></li>
                    </ul>
                </div>
                <div id="phone" class="my-3">
                    <strong>Phone</strong>
                    <div id="phoneNumber"></div>
                </div>
                <div id="email" class="my-3">
                    <strong>Email</strong>
                    <div id="emailAddress"></div>
                </div>
                <strong id="dir-statement-title" class="">Hours</strong>
                <div class="row mt-2">
                    <div class="col-4">
                        <ul style="list-style: none; padding-inline-start: 0px; padding-left: 0px;">
                            <!-- Mobile Text -->
                            <li id="monday" class="mobileDays">Mon</li>
                            <li id="tuesday" class="mobileDays">Tue</li>
                            <li id="wednesday" class="mobileDays">Wed</li>
                            <li id="thursday" class="mobileDays">Thu</li>
                            <li id="friday" class="mobileDays">Fri</li>
                            <li id="saturday" class="mobileDays">Sat</li>
                            <li id="sunday" class="mobileDays">Sun</li>
                            <!-- Desktop Text -->
                            <li id="monday" class="desktopDays">Monday</li>
                            <li id="tuesday" class="desktopDays">Tuesday</li>
                            <li id="wednesday" class="desktopDays">Wednesday</li>
                            <li id="thursday" class="desktopDays">Thursday</li>
                            <li id="friday" class="desktopDays">Friday</li>
                            <li id="saturday" class="desktopDays">Saturday</li>
                            <li id="sunday" class="desktopDays">Sunday</li>
                            <li id="office">Office</li>
                        </ul>
                    </div>
                    <div class="col-8">
                        <ul style="list-style: none; padding-inline-start: 0px;">
                            <li id="monday" class="hours"></li>
                            <li id="tuesday" class="hours"></li>
                            <li id="wednesday" class="hours"></li>
                            <li id="thursday" class="hours"></li>
                            <li id="friday" class="hours"></li>
                            <li id="saturday" class="hours"></li>
                            <li id="sunday" class="hours"></li>
                            <li id="office" class="hours"></li>
                        </ul>
                    </div>
                </div>
                <div class="my-2"><strong>Gate Fee</strong>
                    <div id="fee">No</div>
                </div>
                <div class="mt-3"><strong>Pet Friendly</strong>
                    <div id="pet">Yes</div>
                </div>
                <div class="mt-3"><strong>Acreage</strong>
                    <div id="acreage"></div>
                </div>
            </div>
        </div>
    </div>
    <!--Flickity-->
    <script type="text/javascript" src="https://unpkg.com/flickity@2/dist/flickity.pkgd.min.js"></script>
    <!--Datatable & Moment-->
    <script type="text/javascript" defer src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="/Style%20Library/Haylee-Dev/js/broward/Library/moment.min.js"></script>
    <script type="text/javascript" defer src="https://cdn.datatables.net/plug-ins/1.10.19/sorting/datetime-moment.js"></script>

    <!--Page layout Inline Scripts-->
    <script type="text/javascript">
        $("#siteLinks .slm-dragdrop-source .link-item a").addClass(
            "list-group-item siteLinks-item");
        $("#siteLinks .item a").addClass("list-group-item siteLinks-item");
        // Hides Empty Resources
        $('#siteLinks').each(function () {
            var $this = $(this);
            //find element with '.siteLinks-item' class if none then hide
            var hasResources = $this.find('.siteLinks-item').length > 0;
            if (!hasResources) {
                $this.hide();
            }
        });

        var images = [
            "hero1.jpg",
            "hero2.jpg",
            "hero3.jpg",
            "hero4.jpg",
            "hero5.jpg",
            "hero6.jpg",
            "hero7.jpg",
            "hero8.jpg",
            "hero9.jpg",
        ];
        $("#agencyInfo").css({
            "background": "linear-gradient(0deg,rgba(233, 236, 239, 0.51),#f8f9fa),url(/Style%20Library/V6/img/HomeHero/" +
                images[Math.floor(Math.random() * images.length)] +
                ") no-repeat bottom center",
            "background-size": "cover"
        });
        $("#fullPageContent h1").each(function () {
            var $this = $(this);
            $this.html($this.html().replace(/&nbsp;/g, ''));
        });
    </script>

    <!-- directory item webpart -->
    <script type="text/javascript">
        // spservices
        /* Dynamically Load Item */
        URL = location.href.toLowerCase();
        newID = URL.split('=')[1].replace("#", "");

        gallery = [];

        lt = '';
        lg = '';

        $(document).ready(function () {

            newData2 = $().SPServices.SPGetListItemsJson({
                webURL: "/Parks/",
                listName: "Parks",
                viewName: "",
                CAMLQuery: "<Query><Where><Eq><FieldRef Name='ID'/><Value Type='Text'>" +
                    newID + "</Value></Eq></Where></Query>",
                CAMLViewFields: "",
                CAMLRowLimit: "",
                CAMLQueryOptions: "",
                changeToken: "",
                contains: "",
                mapping: {
                    ows_ID: {
                        mappedName: "ID",
                        objectType: "Text"
                    },
                    ows_Title: {
                        mappedName: "Title",
                        objectType: "Text"
                    },
                    ows_Address: {
                        mappedName: "Address",
                        objectType: "Text"
                    },
                    ows_Zip: {
                        mappedName: "Zip",
                        objectType: "Text"
                    },
                    ows_City: {
                        mappedName: "City",
                        objectType: "Lookup"
                    },
                    ows_Acreage: {
                        mappedName: "Acreage",
                        objectType: "Text"
                    },
                    ows_Overview: {
                        mappedName: "Overview",
                        objectType: "Text"
                    },
                    ows_Phone: {
                        mappedName: "Phone",
                        objectType: "Text"
                    },
                    ows_Email: {
                        mappedName: "Email",
                        objectType: "Text"
                    },
                    ows_Latitude: {
                        mappedName: "Latitude",
                        objectType: "Text"
                    },
                    ows_Longitude: {
                        mappedName: "Longitude",
                        objectType: "Text"
                    },
                    ows_Features: {
                        mappedName: "Features",
                        objectType: "LookupMulti"
                    },
                    ows_Friends_x002d_Group: {
                        mappedName: "Friends-Group",
                        objectType: "Boolean"
                    },
                    ows_Park_x002d_Type: {
                        mappedName: "ParkType",
                        objectType: "Lookup"
                    },
                    ows_Monday: {
                        mappedName: "Monday",
                        objectType: "Text"
                    },
                    ows_Tuesday: {
                        mappedName: "Tuesday",
                        objectType: "Text"
                    },
                    ows_Wednesday: {
                        mappedName: "Wednesday",
                        objectType: "Text"
                    },
                    ows_Thursday: {
                        mappedName: "Thursday",
                        objectType: "Text"
                    },
                    ows_Friday: {
                        mappedName: "Friday",
                        objectType: "Text"
                    },
                    ows_Saturday: {
                        mappedName: "Saturday",
                        objectType: "Text"
                    },
                    ows_Sunday: {
                        mappedName: "Sunday",
                        objectType: "Text"
                    },
                    ows_OfficeHours: {
                        mappedName: "OfficeHours",
                        objectType: "Text"
                    },
                    ows_Rentals: {
                        mappedName: "Rentals",
                        objectType: "LookupMulti"
                    },
                    ows_Webtrac: {
                        mappedName: "Webtrac",
                        objectType: "Text"
                    },
                    ows_CampLink: {
                        mappedName: "CampLink",
                        objectType: "URL"
                    },
                    ows_PetFriendly: {
                        mappedName: "PetFriendly",
                        objectType: "Boolean"
                    },
                    ows_GateFee: {
                        mappedName: "GateFee",
                        objectType: "Boolean"
                    }

                }, // name, mappedName, objectType,
                mappingOverrides: null,
                debug: false
            })

            // build page elements from data

            f1 = $.when(newData2).done(function () {
                dirInfo2 = this.data[0];

                // build title & description
                if (dirInfo2.Title) {
                    $('#dir-title').html(dirInfo2.Title);
                    $('.layoutCrumb').html(dirInfo2.Title);
                }
                /*$('#dir-subtitle').html(dirInfo2.Artist.lookupValue);*/
                if (dirInfo2.Overview) {
                    $('#dir-description').html(dirInfo2.Overview).removeClass(
                        'd-none');
                    $('#dir-description-title').removeClass('d-none').addClass(
                        'd-block mt-3');
                }
                // add links to & show buttons if there's a link in list, if not don't show
                // rentals
                if (dirInfo2.Webtrac) {
                    $('#reserve').attr('href',
                            'https://webtrac.broward.org/wbwsc/webtrac.wsc/wbsearch.html?xxmod=FR&xxfacilitylocation=' +
                            dirInfo2.Webtrac)
                        .removeClass('d-none');
                }
                // campsites
                if (dirInfo2.CampLink) {
                    $('#camp').attr('href', dirInfo2.CampLink.split(',')[0]).removeClass('d-none');
                }
                if (dirInfo2.PetFriendly === true) {
                    $('#pet').html('Yes')
                } else if (dirInfo2.PetFriendly === false) {
                    $('#pet').html('No')
                }
                if (dirInfo2.GateFee === true) {
                    if (window.location.search.split('=')[1].toString() == '19') {
                        $('#fee').prev().html('Parking Fees (per vehicle)')
                        $('#fee').html(
                            'All day - $10<br/>After 2PM - $6<br>July 4 - $20<br/>Special events - $15'
                        )
                    } else {
                        $('#fee').html('$1.50/person weekends and holidays (children 5 and under free)')
                    }
                }
                //$.each(dirInfo2.Features, function(i) {
                // split features into 2 arrays
                // first array
                var arr1 = dirInfo2.Features.slice(0, Math.ceil(dirInfo2.Features.length / 2));
                // second array
                var arr2 = dirInfo2.Features.slice((Math.ceil(dirInfo2.Features.length / 2)), dirInfo2.Features
                    .length);
                // put stuff in first column
                $.each(arr1, function (i) {
                    $('#dir-statement.features-1').append(
                        '<li><i class="fal fa-check" color="green"></i> ' + arr1[i].lookupValue +
                        '</li>');
                })
                // put stuff in second column
                $.each(arr2, function (i) {
                    $('#dir-statement.features-2').append(
                        '<li><i class="fal fa-check" color="green"></i> ' + arr2[i].lookupValue +
                        '</li>');
                })

                $('#dir-statement.features').removeClass('d-none');
                $('#dir-statement-title.features').removeClass('d-none').addClass('d-block mt-3');

                $('li#monday.hours').html(dirInfo2.Monday);
                $('li#tuesday.hours').html(dirInfo2.Tuesday);
                $('li#wednesday.hours').html(dirInfo2.Wednesday);
                $('li#thursday.hours').html(dirInfo2.Thursday);
                $('li#friday.hours').html(dirInfo2.Friday);
                $('li#saturday.hours').html(dirInfo2.Saturday);
                $('li#sunday.hours').html(dirInfo2.Sunday);
                $('li#office.hours').html(dirInfo2.OfficeHours);

                d = new Date();
                today = d.getDay();

                switch (today) {
                    case 0:
                        $('li#sunday').addClass('today');
                        break;
                    case 1:
                        $('li#monday').addClass('today');
                        break;
                    case 2:
                        $('li#tuesday').addClass('today');
                        break;
                    case 3:
                        $('li#wednesday').addClass('today');
                        break;
                    case 4:
                        $('li#thursday').addClass('today');
                        break;
                    case 5:
                        $('li#friday').addClass('today');
                        break;
                    case 6:
                        $('li#saturday').addClass('today');
                        break;
                    default: // do nothing
                        break;
                }

                // build location info


                var gMapInfo = 'https://maps.google.com/?q=' + dirInfo2.Address + dirInfo2.City.lookupValue +
                    ', FL ' + dirInfo2.Zip;

                var gMapLink = gMapInfo.split('undefined').join('')
                    .split(' ').join('+').split(
                        '++').join('+').toLowerCase();

                $('#dir-address1, #dir-address2, #dir-csz').wrap(
                    '<a href="' + gMapLink +
                    '" target="_blank"></a>');

                if (dirInfo2.Address && dirInfo2.City.lookupValue &&
                    dirInfo2.Zip) {
                    $('#dir-address1').html(dirInfo2.Address);
                    $('#dir-csz').html(dirInfo2.City.lookupValue +
                        ", FL " +
                        dirInfo2.Zip);
                }
                if (dirInfo2.Phone) {
                    $('#phoneNumber').html(dirInfo2.Phone);
                }
                if (dirInfo2.Email) {
                    $('#emailAddress').html(dirInfo2.Email.split(':')[1]).wrapInner('<a href="' +
                        dirInfo2.Email + '"></a>')
                }
                if (dirInfo2.Acreage) {
                    $('#acreage').html(dirInfo2.Acreage)
                }

                lt = dirInfo2.Latitude;
                lg = dirInfo2.Longitude;
                initMap();

                $('#directoryItem').removeClass('d-none');

                if (dirInfo2.Rentals) {
                    //console.log(dirInfo2.Rentals);
                }
            });

            $.when(f1).done(function () {
                // Lightbox
                $().SPServices({
                    operation: "GetListItems",
                    listName: "ParksImages",
                    webURL: "/Parks/",
                    CAMLViewFields: "<ViewFields><FieldRef Name='RequiredField' /><FieldRef Name='Title' /><FieldRef Name='Park' /></ViewFields>",
                    completefunc: function (xData, Status) {
                        f2 = $(xData.responseXML).SPFilterNode("z:row").each(function (i) {
                            tilePicture = $(this).attr("ows_RequiredField");
                            linkTitle = $(this).attr("ows_Title");
                            park = $(this).attr("ows_Park") ? $(this).attr(
                                    "ows_Park").split(";#")[0].toString() :
                                false;
                            // if picture is from this park, append to carousel
                            if (park == dirInfo2.ID) {
                                // build flickity slider
                                $('.parkCarousel').append(
                                    '<img class="carousel-cell" src="/' +
                                    tilePicture + '" alt="' + linkTitle + '"/>'
                                );

                            }
                        });

                        $.when(f2).done(function () {
                            if ($('.carousel-cell').length > 4) {
                                flick = $('.parkCarousel').flickity({
                                    // options
                                    imagesLoaded: true,
                                    cellAlign: 'left',
                                    wrapAround: true,
                                    prevNextButtons: false,
                                    pageDots: false,
                                    autoPlay: true
                                })
                            }
                            return;
                        })
                        // only show flickity if enough pictures (4 or 5)
                        if ($('.carousel-cell').length > 4) {
                            $('.parkCarousel').removeClass('d-none');
                            flick.flickity('resize');
                        }
                    }
                })
            })
        });
    </script>
    <script>
        URL = location.href.toLowerCase();
        newID = URL.split('=')[1].replace("#", "");

        $(document).ready(function () {

            newData3 = $().SPServices.SPGetListItemsJson({
                webURL: "/Parks/",
                listName: "Parks",
                viewName: "",
                CAMLQuery: "<Query><Where><Eq><FieldRef Name='ID' /><Value Type='Text'>" + newID +
                    "</Value></Eq></Where></Query>",
                CAMLViewFields: "",
                CAMLRowLimit: "",
                CAMLQueryOptions: "",
                changeToken: "",
                contains: "",
                mapping: {
                    ows_ID: {
                        mappedName: "ID",
                        objectType: "Text"
                    },
                    ows_Alert: {
                        mappedName: "Alert",
                        objectType: "Text"
                    },
                }, // name, mappedName, objectType,
                mappingOverrides: null,
                debug: false
            })

            // build page elements from data
            $.when(newData3).done(function () {

                dirInfo3 = this.data[0];

                //console.log(dirInfo3)
                // build title & description
                if (dirInfo3.Alert) {
                    $('#alertText').html(dirInfo3.Alert);
                    $('#alert-row').removeClass('d-none')
                    $('.alert').alert()
                }
            })
        });
    </script>
    <!-- Init map -->
    <script defer type="text/javascript" src="/Style%20Library/V6/js/broward/Parks/parksMap.js"></script>
    <!-- Google Maps -->
    <script defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAVF9fnqaUvGIJY-HmXtOCpWV5Yu798fXQ"></script>
    <!-- Tabbed Datatable -->
    <script type="text/javascript">
        $(document).ready(function () {
            eventResults = $().SPServices.SPGetListItemsJson({
                webURL: "/Parks/",
                listName: "Events",
                viewName: "",
                CAMLQuery: "",
                CAMLViewFields: "",
                CAMLRowLimit: "",
                CAMLQueryOptions: "",
                changeToken: "",
                contains: "",
                mapping: {
                    ows_ID: {
                        mappedName: "ID",
                        objectType: "Text"
                    },
                    ows_Title: {
                        mappedName: "Title",
                        objectType: "Text"
                    },
                    ows_Date: {
                        mappedName: "StartDate",
                        objectType: "DateTime"
                    },
                    ows_EndDate: {
                        mappedName: "EndDate",
                        objectType: "DateTime"
                    },
                    ows_Park: {
                        mappedName: "Park",
                        objectType: "Lookup"
                    },
                    ows_Link: {
                        mappedName: "Link",
                        objectType: "URL"
                    },
                    ows_Recurring: {
                        mappedName: "Recurring",
                        objectType: "LookupMulti"
                    },
                    ows_Description: {
                        mappedName: "Description",
                        objectType: "Text"
                    },
                    ows_Phone: {
                        mappedName: "Phone",
                        objectType: "Text"
                    },
                    ows_Email: {
                        mappedName: "Email",
                        objectType: "URL"
                    },
                },
                mappingOverrides: null,
                debug: false
            });
            $.when(eventResults).done(function () {

                //if this park has events
                if (window.location.search.split('=')[1].toString() !== ('2' || '11' || '21' || '33' || '35' || '42')) {

                    //Header & Footer Titles
                    var thisEventResults = this.data;

                    //console.log(thisEventResults)

                    resultTitles = this.data[0];
                    resultKeys = Object.keys(resultTitles);

                    // for (i = 0; i < 2; i++) {
                    //     rTitles = resultKeys[i];
                    // }

                    $('#eventHeader').append('<tr><th>Upcoming Events</th><th>Date</th></tr>');

                    // if no events, append empty cells
                    // if ($('tbody#eventItems').children().length == 0) {
                    //     //console.log('empty table but about to append some cells')
                    //     $('#eventItems').append($('<tr><td></td><td></td></tr>'))
                    // }

                    //Main Data
                    $.each(thisEventResults, function (ind, eventItems) {
                        //check if date is upcoming or past
                        //console.log(ind, thisEventResults, resultTitles);
                        //console.log(ind, thisEventResults[ind].Park.lookupId)
                        //console.log('are there events here? ' + $('#eventItems').children().length)

                        var today = new Date();
                        today.setHours(0, 0, 0, 0);

                        //console.log('end date: ' + thisEventResults[ind].EndDate)

                        //console.log('date check:' + (thisEventResults[ind].Date >= today))
                        //console.log('event:' + thisEventResults[ind].Title + ', park id: ' +
                            //thisEventResults[ind].Park.lookupId + ', id:' +
                            //thisEventResults[ind].ID);

                        if ((thisEventResults[ind].StartDate >= today) /*&& ((thisEventResults[ind].EndDate >
                                today) || (thisEventResults[ind].EndDate == 'undefined'))*/&& (
                                thisEventResults[ind].Park.lookupId == window.location.search.split('=')[1].toString())) {
                            // if recurring, add recurring text
                            if (!thisEventResults[ind].Recurring) {
                                var date = moment(thisEventResults[ind].StartDate).format('LL');
                            }
                            // if date, add date
                            if (thisEventResults[ind].Recurring) {
                                var date = thisEventResults[ind].Recurring[0].lookupValue;
                            }
                            //var date = moment(thisEventResults[ind].Date).format('LL');
                            //console.log('info: ' + thisEventResults[ind].Email)
                            //console.log('info: ' + thisEventResults[ind].Email)
                            $('#eventItems')
                                .append($('<tr>')
                                    .append($(
                                        '<td><a id="dirListTitleLink" href="../Pages/Event.aspx?=' +
                                        thisEventResults[ind].ID + '"><strong>' +
                                        thisEventResults[ind].Title + '</strong>'))
                                    .after($(
                                        // only show description if there is one in list
                                        thisEventResults[ind].Description ?
                                        '</strong></a><br/><p class="eventDetails my-3">' +
                                        thisEventResults[ind].Description : false
                                    ))
                                    // only show phone if there is one in list
                                    .after($(
                                        thisEventResults[ind].Phone ?
                                        '</p><p><strong>More Info</strong></p><p class="my-2"><a href="tel:1-' +
                                        thisEventResults[ind].Phone + '">Call ' +
                                        thisEventResults[ind].Phone : false
                                    ))
                                    // only show email if there is one in list
                                    .after($(
                                        thisEventResults[ind].Email ?
                                        '</a></p><p class="mt-2"><a href="' +
                                        thisEventResults[ind].Email.split(',')[1].split(':')[
                                            1] + '">Email ' + thisEventResults[ind].Email.split(
                                            ',')[1].split(':')[1] + '</a></p></td>' : false
                                    ))

                                    .append($('<td>' + date + '</td>'))
                                );
                            //console.log('append ran')
                        }
                        // if (thisEventResults[ind].Park.lookupId != window.location.search.split(
                        //         '=')[1].toString()) {
                        //     $('#eventItems').append($('<tr><td><td>'))
                        // }
                    });

                    $.fn.dataTable.moment('LL', 'en');
                    $('#eventTable').DataTable({
                        "order": [
                            [1, 'asc']
                        ],
                        "columns": [null,
                            null,
                        ],
                        "showNEntries": false,
                        "bInfo": false,
                        "bPaginate": false,
                        "bFilter": false,
                        "language": {
                            "emptyTable": "No events scheduled at this time."
                        }
                    });

                    $('.dataTables_wrapper').find('label').each(
                        function () {
                            $(this).parent().append($(
                                this).children());
                        });
                    $('.dataTables_filter').find('input').each(
                        function () {
                            $('#dirTable_filter input').attr(
                                "placeholder",
                                "Search");
                            $('#dirTable_filter input').removeClass(
                                'form-control-sm');
                        });
                    $('.dataTables_length').addClass(
                        'd-flex flex-row');
                    $('.dataTables_filter').addClass(
                        'md-form');
                    $('select').addClass('mdb-select');
                    $('.mdb-select')
                        .material_select();
                    $('.mdb-select').removeClass(
                        'form-control form-control-sm custom-select custom-select-sm'
                    );
                    $('.dataTables_filter').find('label').remove();
                }
                return;
            });
            webpartMove = $("#webpartContent")
            webpartMove.detach();
            webpartMove.appendTo("#fullPageContent");
        });
    </script>
</body>

</html>